# 🚀 Vercel 部署完成步骤

## 📋 当前进度

✅ 环境变量已配置完成
- MONGODB_URI ✅
- JWT_SECRET ✅
- NODE_ENV ✅
- FRONTEND_URL ✅

## 🎯 下一步操作

### 第一步：重新部署项目

1. **回到 Vercel 项目页面**
   - 在 Vercel Dashboard 中，点击 **AIO2** 项目

2. **进入 Deployments 页面**
   - 点击顶部菜单的 **"Deployments"** 标签

3. **重新部署**
   - 找到最新的部署记录（通常在最上面）
   - 点击部署记录右侧的 **"..."** 菜单
   - 选择 **"Redeploy"**
   - 确认重新部署

4. **等待部署完成**
   - 部署过程约 2-3 分钟
   - 可以看到部署日志
   - 等待状态变为 **"Ready"** 或 **"Success"**

### 第二步：获取实际域名

部署完成后：

1. **查看项目页面**
   - 在项目 Overview 页面
   - 找到 **"Domains"** 部分

2. **复制域名**
   - 会显示类似：`https://aio2-xxxxx.vercel.app`
   - 或：`https://aio2.vercel.app`（如果配置了自定义域名）
   - 复制这个域名

### 第三步：更新 FRONTEND_URL

1. **进入环境变量设置**
   - Settings → Environment Variables

2. **编辑 FRONTEND_URL**
   - 找到 `FRONTEND_URL` 变量
   - 点击右侧 **"..."** → **"Edit"**

3. **更新域名**
   - 将值更新为实际域名（如：`https://aio2-xxxxx.vercel.app`）
   - 确保包含 `https://` 前缀
   - Environment: 保持全部勾选
   - 点击 **"Save"**

4. **再次重新部署**
   - 回到 Deployments
   - 重新部署以确保 FRONTEND_URL 生效

### 第四步：测试部署

#### 1. 测试健康检查

访问：
```
https://your-domain.vercel.app/api/health
```

应该返回：
```json
{
  "success": true,
  "message": "服务运行正常",
  "timestamp": "2025-11-11T..."
}
```

#### 2. 测试网站首页

访问：
```
https://your-domain.vercel.app
```

应该看到：
- 登录/注册页面
- 界面正常显示

#### 3. 测试 API 连接

打开浏览器开发者工具（F12）：
- 查看 Console 是否有错误
- 查看 Network 标签，检查 API 请求是否成功

### 第五步：创建管理员账号

部署成功后，需要创建管理员账号：

#### 方法一：使用脚本（推荐）

1. **修改脚本中的 MongoDB URI**
   ```bash
   cd /Users/bupoo/Github/AIO2/backend
   # 编辑 scripts/createAdmin.js
   # 将 MONGODB_URI 改为你的 Atlas 连接字符串
   ```

2. **运行脚本**
   ```bash
   # 设置环境变量
   export MONGODB_URI="mongodb+srv://AIO2admin:31493170@cluster0.gpq75zd.mongodb.net/jeyi-toolhub?retryWrites=true&w=majority"
   
   # 运行脚本
   node scripts/createAdmin.js
   ```

#### 方法二：使用 MongoDB Compass

1. **下载 MongoDB Compass**
   - https://www.mongodb.com/products/compass

2. **连接数据库**
   - 使用连接字符串：`mongodb+srv://AIO2admin:31493170@cluster0.gpq75zd.mongodb.net/jeyi-toolhub?retryWrites=true&w=majority`

3. **创建管理员**
   - 连接到数据库后
   - 找到 `users` 集合
   - 插入新文档或修改现有用户

#### 方法三：使用 MongoDB Shell

```bash
# 连接数据库
mongosh "mongodb+srv://AIO2admin:31493170@cluster0.gpq75zd.mongodb.net/jeyi-toolhub"

# 创建管理员（需要先加密密码）
# 或使用脚本更方便
```

## ✅ 部署完成检查清单

- [ ] 环境变量已配置
- [ ] 项目已重新部署
- [ ] 部署状态为 "Ready" 或 "Success"
- [ ] 已获取实际域名
- [ ] FRONTEND_URL 已更新为实际域名
- [ ] 健康检查接口正常（/api/health）
- [ ] 网站首页可以访问
- [ ] 管理员账号已创建
- [ ] 可以正常登录

## 🎉 部署成功！

如果所有检查项都完成，你的网站就可以正常使用了！

### 访问地址

- **网站地址**：`https://your-domain.vercel.app`
- **API 地址**：`https://your-domain.vercel.app/api`

### 使用说明

1. **访问网站**
2. **登录管理员账号**：`admin` / `123456`
3. **开始使用**：添加工具、管理用户等

---

**现在去重新部署项目吧！** 🚀

